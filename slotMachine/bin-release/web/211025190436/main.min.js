var AssetAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?s(n):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var GameScene=function(t){function e(){t.call(this),this.NumberOfPictures=5,this.NumberOfAxis=3,this._RollCompleteCheck=0,this.once(eui.UIEvent.COMPLETE,this.uiComplete,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.uiComplete=function(t){egret.log("GameSceneComplete"),this.rollAxis_0.mask=this.shapeMask0,this.rollAxis_1.mask=this.shapeMask1,this.rollAxis_2.mask=this.shapeMask2,this.addEventListener(StartButton.CLICK_COMPLETE,this.StartRoll,this),this.addEventListener(RollAxis.ON_COMPLETE,this.RollCompleteCheck,this)},s.StartRoll=function(t){this.removeEventListener(StartButton.CLICK_COMPLETE,this.StartRoll,this),this.Money.text=""+(parseInt(this.Money.text)-10),this.WinNumbers=[];var e=parseInt(this.cheatInput.text);if(this.IsCheat(e))for(var i=0;i<this.NumberOfAxis;i++)this.WinNumbers[i]=e;else this.WinNumbers=this.randomWinNumbers();egret.log("win numbers="+this.WinNumbers),this.rollAxis_0.init(this.WinNumbers[0]),this.rollAxis_1.init(this.WinNumbers[1]),this.rollAxis_2.init(this.WinNumbers[2]),this.rollAxis_0.RollAxis(),this.rollAxis_1.RollAxis(),this.rollAxis_2.RollAxis()},s.RollCompleteCheck=function(t){this._RollCompleteCheck++,this._RollCompleteCheck==this.NumberOfAxis&&(this._RollCompleteCheck=0,this.winCheck())},s.winCheck=function(){this.addEventListener(StartButton.CLICK_COMPLETE,this.StartRoll,this);var t;t=this.WinNumbers[0]==this.WinNumbers[1]&&this.WinNumbers[0]==this.WinNumbers[2],t&&(this.Money.text=""+(parseInt(this.Money.text)+100))},s.randomWinNumbers=function(){for(var t=[],e=0;e<this.NumberOfAxis;e++)t.push(Math.floor(Math.random()*this.NumberOfPictures));return t},s.IsCheat=function(t){for(var e=[],i=0;i<this.NumberOfPictures;i++)e.push(i);var s=e.indexOf(t);return-1==s?!1:!0},e}(eui.Component);egret.registerClass(GameScene,"GameScene");var Main=function(t){function e(){t.call(this),this.group_list=["preload"],this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/game_res.json","resource/")},s.onConfigComplete=function(t){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupComplete,this),this.group_list.forEach(function(t){RES.loadGroup(t)},this)},s.onGroupComplete=function(t){var e=this,i=this.group_list.indexOf(t.groupName);if(this.group_list.splice(i,1),0==this.group_list.length){this.stage.registerImplementation("eui.IAssetAdapter",new AssetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var s=new eui.Theme("resource/default.thm.json?v="+(new Date).getTime(),this.stage);s.addEventListener(eui.UIEvent.COMPLETE,function(t){e.init()},this)}},s.init=function(){var t=new GameScene;t.skinName="GameSceneSkin",this.addChild(t)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var RollAxis=function(t){function e(){t.call(this),this.numberOfImages=5,this.totalRollTimes=15,this.RollSpeed=.6,this.once(eui.UIEvent.COMPLETE,this.uiComplete,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.uiComplete=function(t){egret.log("RollAxisCom"),this.image_list=[];for(var e=0;e<this.numberOfImages;e++)this.image_list.push(RES.getRes("p"+e+"_png"));this.p0_FirstY=this.p0.y,this.p1_FirstY=this.p1.y,this.p2_FirstY=this.p2.y},s.init=function(t){this.LastImageNumber=t,this.Speed_temp=this.RollSpeed,this.IsFirstRoll=!0,this.countRollTimes=0},s.RollAxis=function(){this.IsFirstRoll?(this.IsFirstRoll=!1,TweenLite.to(this,.1,{onComplete:this.randomeP,onCompleteScope:this})):(TweenLite.to(this.p0,this.Speed_temp,{y:this.p0.y+this.height/4*2,ease:Linear.easeNone}),TweenLite.to(this.p1,this.Speed_temp,{y:this.p1.y+this.height/4*2,ease:Linear.easeNone}),TweenLite.to(this.p2,this.Speed_temp,{y:this.p2.y+this.height/4*2,ease:Linear.easeNone}),TweenLite.to(this.p0,this.Speed_temp,{alpha:1,onComplete:this.randomeP,onCompleteScope:this}),this.countRollTimes++),this.temp_p0=this.p0.texture,this.countRollTimes<=Math.floor(this.totalRollTimes/4)&&this.Speed_temp>0?this.Speed_temp-=.08:this.countRollTimes>=this.totalRollTimes-Math.floor(this.totalRollTimes/4)&&(this.Speed_temp+=.08)},s.randomeP=function(){this.p0.texture=RES.getRes("p"+Math.floor(4*Math.random())+"_png"),this.p1.texture=RES.getRes("p"+Math.floor(4*Math.random())+"_png"),this.p2.texture=this.temp_p0,this.p0.y=this.p0_FirstY,this.p1.y=this.p1_FirstY,this.p2.y=this.p2_FirstY,this.countRollTimes==this.totalRollTimes?this.RollEnd():this.RollAxis()},s.RollEnd=function(){this.p0.texture=RES.getRes("p"+this.LastImageNumber+"_png"),TweenLite.to(this.p0,1.3,{y:this.p0.y+this.height/4*2,ease:Circ}),TweenLite.to(this.p1,1.3,{y:this.p1.y+this.height/4*2,ease:Circ}),TweenLite.to(this.p2,1.3,{y:this.p2.y+this.height/4*2,ease:Circ}),TweenLite.to(this.p0,1.3+.1,{alpha:1,onComplete:this.ON_COMPLETE,onCompleteScope:this}),this.Speed_temp=this.RollSpeed},s.ON_COMPLETE=function(){this.dispatchEventWith(e.ON_COMPLETE,!0,!0)},e.ON_COMPLETE="RollAxis.ON_COMPLETE",e}(eui.Component);egret.registerClass(RollAxis,"RollAxis");var StartButton=function(t){function e(){t.call(this),this.once(eui.UIEvent.COMPLETE,this.uiComplete,this),this.onClick=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandler,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.uiComplete=function(t){egret.log("startButtonCom")},s.touchHandler=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.button.texture=RES.getRes("button2_png"),this.button.alpha=.7,this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHandler,this);break;case egret.TouchEvent.TOUCH_END:this.onClick=!0,this.button.texture=RES.getRes("button1_png"),this.button.alpha=1,this.dispatchEventWith(e.CLICK_COMPLETE,!0,null),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchHandler,this)}return this.onClick},e.CLICK_COMPLETE="CLICK_COMPLETE",e}(eui.Component);egret.registerClass(StartButton,"StartButton");var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,s){function n(t){e.call(s,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);